{"ast":null,"code":"/*\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"../css/CreateSunfish.css\";\r\n\r\nfunction CreateSunfish() {\r\n    const [name, setName] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [canCreate, setCanCreate] = useState(false);\r\n\r\n    // 기존 개복치 상태 확인\r\n    useEffect(() => {\r\n        const checkSunfishStatus = async () => {\r\n            try {\r\n                const response = await fetch(\"http://127.0.0.1:8000/api/sunfish/\");\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to fetch Sunfish status\");\r\n                }\r\n                const data = await response.json();\r\n                setCanCreate(!data.is_alive); // 죽은 경우만 새 개복치 생성 가능\r\n            } catch (err) {\r\n                console.error(\"Error checking Sunfish status:\", err.message);\r\n            }\r\n        };\r\n\r\n        checkSunfishStatus();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage(\"\");\r\n        setError(\"\");\r\n\r\n        try {\r\n            const response = await fetch(\"http://127.0.0.1:8000/api/createsunfish/\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ name }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setMessage(`Sunfish '${data.sunfish.name}' created successfully!`);\r\n                setName(\"\"); // 입력 초기화\r\n                setCanCreate(false); // 개복치 생성 제한\r\n            } else {\r\n                const errorData = await response.json();\r\n                setError(errorData.error || \"Failed to create Sunfish\");\r\n            }\r\n        } catch (err) {\r\n            setError(\"An unexpected error occurred\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"create-sunfish-container\">\r\n            <h2>Create a New Sunfish</h2>\r\n            {!canCreate ? (\r\n                <p>You can only create a new Sunfish if the current one is dead.</p>\r\n            ) : (\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Sunfish Name\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                    <button type=\"submit\">Create</button>\r\n                </form>\r\n            )}\r\n            {message && <p className=\"success-message\">{message}</p>}\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateSunfish;\r\n*/","map":{"version":3,"names":[],"sources":["D:/UNIV/2024 2학기/Open Source Software/TermProject/oceanfish/client/src/components/CreateSunfish.js"],"sourcesContent":["/*\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"../css/CreateSunfish.css\";\r\n\r\nfunction CreateSunfish() {\r\n    const [name, setName] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [canCreate, setCanCreate] = useState(false);\r\n\r\n    // 기존 개복치 상태 확인\r\n    useEffect(() => {\r\n        const checkSunfishStatus = async () => {\r\n            try {\r\n                const response = await fetch(\"http://127.0.0.1:8000/api/sunfish/\");\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to fetch Sunfish status\");\r\n                }\r\n                const data = await response.json();\r\n                setCanCreate(!data.is_alive); // 죽은 경우만 새 개복치 생성 가능\r\n            } catch (err) {\r\n                console.error(\"Error checking Sunfish status:\", err.message);\r\n            }\r\n        };\r\n\r\n        checkSunfishStatus();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage(\"\");\r\n        setError(\"\");\r\n\r\n        try {\r\n            const response = await fetch(\"http://127.0.0.1:8000/api/createsunfish/\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ name }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setMessage(`Sunfish '${data.sunfish.name}' created successfully!`);\r\n                setName(\"\"); // 입력 초기화\r\n                setCanCreate(false); // 개복치 생성 제한\r\n            } else {\r\n                const errorData = await response.json();\r\n                setError(errorData.error || \"Failed to create Sunfish\");\r\n            }\r\n        } catch (err) {\r\n            setError(\"An unexpected error occurred\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"create-sunfish-container\">\r\n            <h2>Create a New Sunfish</h2>\r\n            {!canCreate ? (\r\n                <p>You can only create a new Sunfish if the current one is dead.</p>\r\n            ) : (\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Sunfish Name\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                    <button type=\"submit\">Create</button>\r\n                </form>\r\n            )}\r\n            {message && <p className=\"success-message\">{message}</p>}\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateSunfish;\r\n*/\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}